<Page x:Class="PK.BridgeService.ConfigWizard.Pages.ScaleDetectionPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="ScaleDetection">

    <StackPanel>
        <TextBlock Style="{StaticResource TitleText}"
                  Text="COM Port &amp; Scale Detection"/>

        <TextBlock TextWrapping="Wrap" Margin="0,0,0,20">
            Detect and assign weight scales to COM ports. The system supports dual-scale operation
            with SMALL and BIG scale types. Configure COM ports based on your physical scale connections.
        </TextBlock>

        <Button x:Name="DetectButton"
               Content="Detect Available COM Ports"
               Click="DetectButton_Click"
               Width="200"
               HorizontalAlignment="Left"
               Margin="0,0,0,20"/>

        <GroupBox Header="SMALL Scale Configuration">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <CheckBox x:Name="SmallScaleEnabledCheckBox"
                         Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                         Content="Enable SMALL scale"
                         IsChecked="True"
                         Margin="0,0,0,10"/>

                <Label Grid.Row="1" Grid.Column="0" Content="COM Port:"/>
                <ComboBox x:Name="SmallScalePortComboBox"
                         Grid.Row="1" Grid.Column="1"/>

                <Label Grid.Row="2" Grid.Column="0" Content="Baud Rate:"/>
                <ComboBox x:Name="SmallScaleBaudRateComboBox"
                         Grid.Row="2" Grid.Column="1"
                         SelectedIndex="2">
                    <ComboBoxItem Content="4800"/>
                    <ComboBoxItem Content="7200"/>
                    <ComboBoxItem Content="9600"/>
                    <ComboBoxItem Content="14400"/>
                    <ComboBoxItem Content="19200"/>
                </ComboBox>

                <Label Grid.Row="3" Grid.Column="0" Content="Scale Model (optional):"/>
                <TextBox x:Name="SmallScaleModelTextBox"
                        Grid.Row="3" Grid.Column="1"
                        ToolTip="e.g., PRECISION-5000"/>
            </Grid>
        </GroupBox>

        <GroupBox Header="BIG Scale Configuration">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <CheckBox x:Name="BigScaleEnabledCheckBox"
                         Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                         Content="Enable BIG scale"
                         IsChecked="True"
                         Margin="0,0,0,10"/>

                <Label Grid.Row="1" Grid.Column="0" Content="COM Port:"/>
                <ComboBox x:Name="BigScalePortComboBox"
                         Grid.Row="1" Grid.Column="1"/>

                <Label Grid.Row="2" Grid.Column="0" Content="Baud Rate:"/>
                <ComboBox x:Name="BigScaleBaudRateComboBox"
                         Grid.Row="2" Grid.Column="1"
                         SelectedIndex="2">
                    <ComboBoxItem Content="4800"/>
                    <ComboBoxItem Content="7200"/>
                    <ComboBoxItem Content="9600"/>
                    <ComboBoxItem Content="14400"/>
                    <ComboBoxItem Content="19200"/>
                </ComboBox>

                <Label Grid.Row="3" Grid.Column="0" Content="Scale Model (optional):"/>
                <TextBox x:Name="BigScaleModelTextBox"
                        Grid.Row="3" Grid.Column="1"
                        ToolTip="e.g., HEAVY-DUTY-100"/>
            </Grid>
        </GroupBox>

        <TextBlock Style="{StaticResource HelpText}"
                  Margin="0,10,0,0">
            ðŸ’¡ Click "Detect Available COM Ports" to scan and populate available COM ports.
            Select the appropriate port for each scale based on your physical connections.
        </TextBlock>
    </StackPanel>
</Page>
